#(13) Ticket numbers usually consist of an even number of digits. A ticket number is 
#considered lucky if the sum of the first half of the digits is equal to the sum of the 
#second half. Given a ticket number n, determine if it's lucky or not.
#Example
#For n = 1230, the output should be isLucky(n) = true;
#For n = 239017, the output should be isLucky(n) = false.



.data
prompt:     .asciiz "Write your ticket number: "
lucky:      .asciiz "Lucky"
not_lucky:  .asciiz "Not Lucky"
buffer:     .space 1000 
error_msg:  .asciiz "Do not input empty string! \n"
error_msg2:  .asciiz "Input a number with an even number of digits! \n"
.text
start:
    li $v0, 4
    la $a0, error_msg2
    syscall
main:
    # Print prompt
    li $v0, 4
    la $a0, prompt
    syscall

    # Read ticket number
    li $v0, 8
    la $a0, buffer
    li $a1, 1000
    syscall
    
    move $s0, $a0 
    
    addi $t8,$t8,0		#index i = 0
    addi $t9,$zero,1
loop:          #tính độ dài chuỗi           
    add 	$t0, $s0, $t8     
    lb 		$t1, 0($t0)        
    beq 	$t1, $zero, end_loop  	
    addi 	$t8, $t8, 1      
    j loop                
end_loop:   
    bne $t8,$t9,not_empty
    li $v0, 4
    la $a0, error_msg
    syscall
    j main
not_empty:    
    li $t3, 2			#t0 = 2 de kiem tra chan le cua strlen
    div $t8, $t3         	#hi la phan du hi = 1 tuc la strlen chan, nguoc lai strlen le(do strlen luon +1 so voi do dai that)
    mfhi $t1		
    addi $t4,$zero,0
    beq $t1, $t4, start
    
    addi $t8, $t8, -1
    srl $t8, $t8, 1     #chia đôi giá trị ở $t8
    move $t9,$t8
    addi $t2, $t2, 0
    li $t5, 0 # tổng nửa đầu
    li $t6, 0 # tổng nửa sau
    addi $t7,$t7,0
 

          
check_lucky:
    beq $t2,$t8,check_result
    add $t3,$s0,$t9  #kí tự ở nửa đầu
    add $t4,$s0,$t2  #kí tự ở nửa cuối
    lb $s1,0($t3)  #load kí tự ở $t3  
    lb $s2,0($t4)  #load kí tự ở $t4
    add $t5,$t5,$s1 #cộng tổng kí tự nửa đầu
    add $t6,$t6,$s2 #cộng tổng kí tự nửa sau 
    addi $t9,$t9,1  #chuyển đến chỉ số của kí tự tiếp theo ở nửa đầu
    addi $t2,$t2,1  #chuyển đến chỉ số của kí tự tiếp theo ở nửa sau
    j check_lucky
        
                                
check_result:
    beq $t5, $t6, print_lucky
    j print_not_lucky

print_lucky:
    la $a0, lucky
    li $v0, 4
    syscall
    j exit

print_not_lucky:
    la $a0, not_lucky
    li $v0, 4
    syscall

exit:
    li $v0, 10
    syscall
